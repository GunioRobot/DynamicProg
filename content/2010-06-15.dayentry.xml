<?xml version="1.0" encoding="utf-8"?>
<DayEntry xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="urn:newtelligence-com:dasblog:runtime:data">
  <Date>2010-06-14T17:00:00-07:00</Date>
  <Entries>
    <Entry>
      <Content>&lt;style type="text/css"&gt; 	&lt;!-- 		@page { margin: 2cm } 		P { margin-bottom: 0.21cm } 		H1 { margin-bottom: 0.21cm } 		H1.western { font-family: "Liberation Sans", sans-serif; font-size: 16pt } 		H1.cjk { font-family: "DejaVu Sans"; font-size: 16pt } 		H1.ctl { font-family: "DejaVu Sans"; font-size: 16pt } 		H3 { margin-bottom: 0.21cm } 		H3.western { font-family: "Liberation Sans", sans-serif } 	--&gt; 	&lt;/style&gt;    &lt;p style="margin-bottom: 0cm;"&gt;I have been researching node.js and the ecosystem around it. Yes, node has an ecosystem, a very vibrant one if I may say. Today I tried a simple web framework that resembles Ruby's Sinatra by the name of Express.&lt;/p&gt;&lt;h3 style="margin-bottom: 0cm;"&gt;Installation&lt;br /&gt;&lt;/h3&gt;  &lt;p style="margin-bottom: 0cm;"&gt;There are 2 ways to install it, one using Kiwi a node package manager, the other is cloning the github repo and doing make install on it. I first tried using Kiwi but it didn't work for me so I got the code with git and didn't have a problem.&lt;/p&gt;  &lt;p style="margin-bottom: 0cm;"&gt;There is some documentation on the website, enough to get you started.&lt;/p&gt; &lt;h3 class="western"&gt;Characteristics&lt;/h3&gt; &lt;p&gt;Most of the time you will write your application in one file that acts as a front controller. Actually is not a controller just a module,lets call it main. In the module you write methods to handle requests according to the HTTP VERB used. You map them to url's passing the pattern as the first parameter. For example.&lt;/p&gt; &lt;p style="margin-bottom: 0cm; background: none repeat scroll 0% 0% rgb(0, 0, 0);" align="LEFT"&gt;&lt;font color="#f8f8f2"&gt;&lt;font face="Inconsolata"&gt;&lt;font color="#f8f8f2"&gt;get(&lt;/font&gt;&lt;font color="#ffff66"&gt;'/'&lt;/font&gt;&lt;font color="#f8f8f2"&gt;,&lt;/font&gt;&lt;font color="#8ae5ef"&gt;&lt;i&gt;function&lt;/i&gt;&lt;/font&gt;&lt;font color="#fd971f"&gt;(){&lt;br /&gt;&amp;nbsp;&amp;nbsp; this&lt;/font&gt;&lt;font color="#f8f8f2"&gt;.redirect(&lt;/font&gt;&lt;font color="#ffff66"&gt;'/home'&lt;/font&gt;&lt;font size="4"&gt;);&lt;br /&gt;})&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;   &lt;p style="margin-bottom: 0cm;"&gt;Will handle a request to the root of your application. In the same module (file) you can have all the handlers for your site (if you want) even when they represent very different resources. I prefer to separate them in some more logic organization for most but the simple apps.&lt;br /&gt;For example I want to have the code that handles all calls to the route /admin/* in an admin module, so I create a new file called admin.js and place this file in the same folder as my app.js file&lt;/p&gt;  &lt;p style="margin-bottom: 0cm;"&gt;Them at the top I just type.&lt;/p&gt;  &lt;p style="margin-bottom: 0cm; background: none repeat scroll 0% 0% rgb(192, 192, 192);"&gt;&lt;font face="Courier 10 Pitch"&gt;require.paths.unshift('.')&lt;br /&gt;require('admin')&lt;/font&gt;&lt;/p&gt;  &lt;p style="margin-bottom: 0cm;"&gt;The unshifting of the paths is needed because we previously change it to the location of the express module you can also just type&lt;/p&gt;  &lt;p style="margin-bottom: 0cm; background: none repeat scroll 0% 0% rgb(192, 192, 192);"&gt;&lt;font face="Courier 10 Pitch"&gt;require('./admin')&lt;/font&gt;&lt;/p&gt; &lt;h3 class="western"&gt;Running the application and debugging.&lt;/h3&gt; &lt;p&gt;Once you have all your handlers done starting the app is as easy as type:&lt;/p&gt; &lt;p style="background: none repeat scroll 0% 0% rgb(192, 192, 192);"&gt;&lt;font face="Courier 10 Pitch"&gt;node app.js&lt;/font&gt;&lt;/p&gt; &lt;p&gt;If you have any mistakes in your code you will see an error in the command line:&lt;/p&gt; &lt;p&gt;&lt;img style="max-width: 800px;" src="http://blog.dynamicprogrammer.com/content/binary/console_error.png" /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt; &lt;p style="margin-bottom: 0cm;"&gt;If the error is found during run time, by default, Express provides a friendly 500 error page.&lt;/p&gt;&lt;p style="margin-bottom: 0cm;"&gt;&lt;img style="max-width: 800px;" src="http://blog.dynamicprogrammer.com/content/binary/500_error.png" /&gt;&lt;br /&gt;&lt;/p&gt; &lt;p style="margin-bottom: 0cm;"&gt;In this case the error is a view file missing.&lt;/p&gt;  &lt;h3 class="western"&gt;Views&lt;/h3&gt; &lt;p&gt;Out of the box Express knows about Haml and Saas templates and will look for view files in the views folder. It also support layouts and partial views to compose complex ui.&lt;/p&gt; &lt;p&gt;By default will try to get a layout by the name of "layout" for the same view engine you are using for the view, for example in our case that we are using haml, it will try to load a file by the name of layout.html.haml. &lt;br /&gt;You can disable layouts, setting layout: false in the hash passed to the render method of the request object.&lt;/p&gt; &lt;p style="margin-bottom: 0cm; background: none repeat scroll 0% 0% rgb(0, 0, 0);" align="LEFT"&gt;&lt;font face="Inconsolata"&gt;&lt;font&gt;&lt;font color="#f8f8f2"&gt;get(&lt;/font&gt;&lt;font color="#ffff66"&gt;'/home'&lt;/font&gt;&lt;font color="#f8f8f2"&gt;, &lt;/font&gt;&lt;font color="#8ae5ef"&gt;&lt;i&gt;function&lt;/i&gt;&lt;/font&gt;&lt;font color="#75715e"&gt;(){&lt;br /&gt;//return 'Hello you are at the home of the new Express site'; &lt;br /&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;font color="#f8f8f2"&gt; &lt;/font&gt;&lt;font color="#f8f8f2"&gt;&lt;font face="Inconsolata"&gt;&lt;font color="#fd971f"&gt;this&lt;/font&gt;&lt;font color="#f8f8f2"&gt;.render(&lt;/font&gt;&lt;font color="#ffff66"&gt;'home.html.haml'&lt;/font&gt;&lt;font&gt;,{&lt;br /&gt;&amp;nbsp;layout: &lt;/font&gt;&lt;font color="#ae81ff"&gt;false&lt;/font&gt;&lt;font&gt;,&lt;br /&gt;&amp;nbsp; locals: {&lt;br /&gt;&amp;nbsp;&amp;nbsp; title: &lt;/font&gt;&lt;font color="#ffff66"&gt;'Express demo site'&lt;/font&gt;&lt;font&gt;,&lt;br /&gt;&amp;nbsp;&amp;nbsp; message: &lt;/font&gt;&lt;font&gt;'This welcome message is brought to you thank to Haml'&lt;br /&gt;&amp;nbsp; }&lt;br /&gt;&amp;nbsp;})&lt;br /&gt;})&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;&lt;font size="3"&gt;Or you can specify the name explicitly:&lt;/font&gt;&lt;/p&gt; &lt;p style="background: none repeat scroll 0% 0% rgb(0, 0, 0);"&gt;&lt;font color="#f8f8f2"&gt;    &lt;font&gt;&lt;font face="Inconsolata"&gt;layout: &lt;/font&gt;&lt;/font&gt;&lt;font color="#ffff66"&gt;&lt;font face="Inconsolata"&gt;'general.html.haml'&lt;/font&gt;&lt;/font&gt;&lt;font color="#f8f8f2"&gt;&lt;font face="Inconsolata"&gt;,&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt; &lt;h3 class="western"&gt;Plug-ins&lt;/h3&gt;  &lt;p&gt;Express has a very simple plug-in architecture that make it very easy to extend. Express uses plug-ins to provide it's core services, so besides the 4 required core plug-ins you can add or remove services that you don't use.&lt;/p&gt;&lt;h3 class="western"&gt;Conclusions&lt;/h3&gt; Express is a cool little framework that should help you to write simple applications without a lot of hassle.&lt;br /&gt;In a future post I will take a look at Geddy another web framework, but this one inspired by Rails.&lt;br /&gt;&lt;br /&gt;&lt;div class="zemanta-pixie"&gt;&lt;img class="zemanta-pixie-img" alt="" src="http://img.zemanta.com/pixy.gif?x-id=9801ac70-577e-89f6-805b-5efe8a04df2d" /&gt;&lt;/div&gt;</Content>
      <Created>2010-06-14T18:35:34.5029193-07:00</Created>
      <Modified>2010-06-14T18:35:34.5029193-07:00</Modified>
      <EntryId>6f477737-d35f-428f-a796-b4b2193c85c4</EntryId>
      <Description />
      <Title>Node.js web development with Express</Title>
      <Categories>Frameworks;node.js;Programming;Tools</Categories>
      <Author>hgarcia</Author>
      <IsPublic>true</IsPublic>
      <Syndicated>true</Syndicated>
      <ShowOnFrontPage>true</ShowOnFrontPage>
      <AllowComments>true</AllowComments>
      <Attachments />
      <Crossposts />
      <Latitude xsi:nil="true" />
      <Longitude xsi:nil="true" />
    </Entry>
  </Entries>
</DayEntry>